<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot Framework Training - Academia Interactiva</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/components.css">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ü§ñ</text></svg>">
    <meta name="description" content="Academia interactiva de Robot Framework - 251 lecciones pr√°cticas para QA Engineers">
    <meta name="keywords" content="Robot Framework, QA, Testing, Automatizaci√≥n, Python, Selenium">
</head>
<body data-theme="light">
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-robot">ü§ñ</div>
            <h2>Robot Framework Academy</h2>
            <div class="loading-bar">
                <div class="loading-progress" id="loadingProgress"></div>
            </div>
            <p id="loadingText">Inicializando academia...</p>
        </div>
    </div>

    <!-- Main Application -->
    <div id="app" class="app-container hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebarToggle" title="Mostrar/Ocultar men√∫">
                        <span class="toggle-icon">‚Äπ‚Äπ</span>
                    </button>
                    <div class="app-logo">
                        <span class="logo-icon">ü§ñ</span>
                        <h1>RF Academy</h1>
                    </div>
                </div>
                
                <div class="header-center">
                    <div class="breadcrumb" id="breadcrumb" style="display: none;">
                        <span class="breadcrumb-home" onclick="showWelcome()">üè† Inicio</span>
                        <span class="breadcrumb-separator">‚Ä∫</span>
                        <span class="breadcrumb-current" id="currentLesson">Lecci√≥n actual</span>
                    </div>
                </div>
                
                <div class="header-right">
                    <div class="search-container">
                        <input type="text" id="searchInput" placeholder="Buscar lecciones..." class="search-input">
                        <div class="search-results" id="searchResults"></div>
                    </div>
                    <div class="progress-indicator">
                        <span id="globalProgressText">0/251</span>
                        <div class="progress-ring">
                            <div class="progress-circle" id="progressCircle"></div>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Layout -->
        <div class="main-layout">
            <!-- Sidebar -->
            <aside class="sidebar" id="sidebar">
                <div class="sidebar-content">
                    <!-- Progress Summary -->
                    <div class="progress-summary">
                        <h3>üìä Tu Progreso</h3>
                        <div class="progress-stats">
                            <div class="stat-item">
                                <span class="stat-number" id="completedCount">0</span>
                                <span class="stat-label">Completadas</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-number" id="progressPercent">0%</span>
                                <span class="stat-label">Avance</span>
                            </div>
                        </div>
                        <div class="global-progress-bar">
                            <div class="progress-fill" id="globalProgressFill" style="width: 0%"></div>
                        </div>
                    </div>

                    <!-- Filters -->
                    <div class="lesson-filters">
                        <button class="filter-btn active" data-filter="all">üìö Todas</button>
                        <button class="filter-btn" data-filter="beginner">üü¢ B√°sico</button>
                        <button class="filter-btn" data-filter="intermediate">üü° Intermedio</button>
                        <button class="filter-btn" data-filter="advanced">üî¥ Avanzado</button>
                        <button class="filter-btn" data-filter="completed">‚úÖ Completadas</button>
                        <button class="filter-btn" data-filter="pending">‚è≥ Pendientes</button>
                    </div>

                    <!-- Sections Menu -->
                    <div class="sections-menu" id="sectionsMenu">
                        <!-- Se generar√° din√°micamente -->
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="main-content">
                <!-- Welcome Screen -->
                <div id="welcomeScreen" class="welcome-screen">
                    <div class="welcome-content">
                        <div class="welcome-hero">
                            <div class="hero-icon">üöÄ</div>
                            <h1>Robot Framework Academy</h1>
                            <p class="hero-subtitle">251 Lecciones Pr√°cticas para QA Engineers</p>
                            <p class="hero-description">
                                Domina la automatizaci√≥n de pruebas con Robot Framework desde cero hasta nivel experto. 
                                Curso completo con ejercicios pr√°cticos, proyectos reales y certificaci√≥n profesional.
                            </p>
                        </div>

                        <div class="welcome-stats">
                            <div class="stat-card">
                                <div class="stat-icon">üìñ</div>
                                <div class="stat-info">
                                    <h3>251</h3>
                                    <p>Lecciones Interactivas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">‚è±Ô∏è</div>
                                <div class="stat-info">
                                    <h3>120+</h3>
                                    <p>Horas de Contenido</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üéØ</div>
                                <div class="stat-info">
                                    <h3>72</h3>
                                    <p>Secciones Tem√°ticas</p>
                                </div>
                            </div>
                            <div class="stat-card">
                                <div class="stat-icon">üèÜ</div>
                                <div class="stat-info">
                                    <h3>Pro</h3>
                                    <p>Certificaci√≥n</p>
                                </div>
                            </div>
                        </div>

                        <div class="welcome-actions">
                            <button class="cta-primary" onclick="startLearning()">
                                üöÄ Comenzar Ahora
                            </button>
                            <button class="cta-secondary" onclick="showCurriculum()">
                                üìö Ver Curriculum
                            </button>
                        </div>

                        <div class="learning-path-preview">
                            <h3>üó∫Ô∏è Tu Camino de Aprendizaje</h3>
                            <div class="path-stages">
                                <div class="path-stage">
                                    <div class="stage-number">1</div>
                                    <div class="stage-info">
                                        <h4>üü¢ Fundamentos</h4>
                                        <p>Setup, sintaxis, primeros tests</p>
                                    </div>
                                </div>
                                <div class="path-stage">
                                    <div class="stage-number">2</div>
                                    <div class="stage-info">
                                        <h4>üü° Intermedio</h4>
                                        <p>APIs, mobile, data-driven</p>
                                    </div>
                                </div>
                                <div class="path-stage">
                                    <div class="stage-number">3</div>
                                    <div class="stage-info">
                                        <h4>üî¥ Avanzado</h4>
                                        <p>CI/CD, performance, enterprise</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lesson Content -->
                <div id="lessonContent" class="lesson-content hidden">
                    <!-- Se cargar√° din√°micamente -->
                </div>

                <!-- Lesson Actions -->
                <div id="lessonActions" class="lesson-actions hidden">
                    <div class="actions-content">
                        <button class="action-btn secondary" id="prevLessonBtn" onclick="navigateLesson('prev')">
                            ‚Äπ Anterior
                        </button>
                        <button class="action-btn primary" id="completeBtn" onclick="toggleLessonComplete()">
                            ‚úÖ Marcar Completada
                        </button>
                        <button class="action-btn secondary" id="nextLessonBtn" onclick="navigateLesson('next')">
                            Siguiente ‚Ä∫
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- ===== FLOATING ACTION BUTTONS - GESTIONADOS POR CORE.JS ===== -->
    <div class="fab-container" id="fabContainer">
        <div class="fab-menu">
            <button class="fab-toggle" id="fabToggle" title="Men√∫ de acciones">
                <span class="fab-icon">‚öôÔ∏è</span>
            </button>
            <div class="fab-options" id="fabOptions">
                <button class="fab-option" id="themeToggle" title="Cambiar tema">
                    <span class="fab-icon theme-icon">üåô</span>
                </button>
                <button class="fab-option" id="exportProgress" title="Exportar progreso">
                    <span class="fab-icon">üìä</span>
                </button>
                <button class="fab-option" id="resetProgress" title="Reiniciar progreso">
                    <span class="fab-icon">üîÑ</span>
                </button>
                <button class="fab-option" id="helpBtn" title="Ayuda">
                    <span class="fab-icon">‚ùì</span>
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <!-- Modal Overlay -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div class="modal-content" id="modalContent">
            <!-- Se cargar√° din√°micamente -->
        </div>
    </div>

    <!-- ===== SCRIPTS CON SISTEMA DIN√ÅMICO INTEGRADO ===== -->
    <script src="js/curriculum-data.js"></script>
    <script src="js/core.js"></script>
    
    <!-- ===== DYNAMIC LESSON LOADER v2.0 - OPTIMIZED ===== -->
    <script>
        // üöÄ CARGADOR DIN√ÅMICO DE LECCIONES 001-251
        function loadAllLessons() {
            console.log('üîÑ Iniciando carga din√°mica de lecciones 001-251...');
            
            let loaded = 0;
            let failed = 0;
            const startTime = performance.now();
            
            for (let i = 1; i <= 251; i++) {
                const lessonNumber = String(i).padStart(3, '0');
                const script = document.createElement('script');
                script.src = `js/lessons/lesson-${lessonNumber}.js`;
                script.async = false; // Mantener orden de carga
                
                script.onload = () => {
                    loaded++;
                    if (loaded <= 10) { // Log solo las primeras 10 para no saturar consola
                        console.log(`‚úÖ Lecci√≥n ${lessonNumber} cargada`);
                    }
                    checkLoadingComplete();
                };
                
                script.onerror = () => {
                    failed++;
                    // Solo mostrar error para lecciones que esperamos que existan
                    if (i <= 20) {
                        console.log(`‚è≥ Lecci√≥n ${lessonNumber} no disponible a√∫n`);
                    }
                    checkLoadingComplete();
                };
                
                document.head.appendChild(script);
            }
            
            function checkLoadingComplete() {
                if (loaded + failed === 251) {
                    const endTime = performance.now();
                    const loadTime = Math.round(endTime - startTime);
                    
                    console.log(`üéØ CARGA DIN√ÅMICA COMPLETADA:`);
                    console.log(`   ‚úÖ Lecciones cargadas: ${loaded}`);
                    console.log(`   ‚è≥ No disponibles: ${failed}`);
                    console.log(`   ‚ö° Tiempo total: ${loadTime}ms`);
                    
                    // Notificar que la carga est√° lista
                    document.dispatchEvent(new CustomEvent('lessonsLoaded', {
                        detail: { loaded, failed, totalTime: loadTime }
                    }));
                }
            }
        }
        
        // üéØ INICIALIZAR CARGA INMEDIATAMENTE
        loadAllLessons();
    </script>

    <!-- ===== INICIALIZACI√ìN MEJORADA ===== -->
    <script>
        // Show loading screen initially
        function showLoadingScreen() {
            const loadingScreen = document.getElementById('loadingScreen');
            const progressBar = document.getElementById('loadingProgress');
            const loadingText = document.getElementById('loadingText');
            
            let progress = 0;
            const interval = setInterval(() => {
                progress += Math.random() * 15;
                if (progress >= 100) {
                    progress = 100;
                    clearInterval(interval);
                    setTimeout(hideLoadingScreen, 500);
                }
                
                progressBar.style.width = progress + '%';
                
                if (progress < 30) {
                    loadingText.textContent = 'Cargando curriculum...';
                } else if (progress < 50) {
                    loadingText.textContent = 'Inicializando lecciones...';
                } else if (progress < 80) {
                    loadingText.textContent = 'Preparando interfaz...';
                } else {
                    loadingText.textContent = '¬°Listo para aprender!';
                }
            }, 100);
        }

        function hideLoadingScreen() {
            document.getElementById('loadingScreen').style.display = 'none';
            document.getElementById('app').classList.remove('hidden');
        }

        // Start the loading sequence immediately
        showLoadingScreen();

        // Initialize app when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üöÄ Inicializando Robot Framework Academy...');
            // El core.js ya tiene su propio DOMContentLoaded listener
        });

        // üéØ ESCUCHAR CUANDO TODAS LAS LECCIONES SE CARGUEN
        document.addEventListener('lessonsLoaded', function(event) {
            const { loaded, failed, totalTime } = event.detail;
            console.log(`üéâ Sistema listo: ${loaded} lecciones disponibles de 251 total`);
            
            // Opcional: Mostrar notificaci√≥n al usuario
            if (loaded > 0) {
                setTimeout(() => {
                    console.log(`üí° Tip: Tienes ${loaded} lecciones listas para estudiar`);
                }, 2000);
            }
        });
    </script>
	<script src="js/access-control.js"></script>
</body>
</html>